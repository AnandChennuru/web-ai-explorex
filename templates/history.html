{% extends 'base.html' %}

{% block content %}

<div class="page-header">
  <h1>ğŸ“š Session History</h1>
  <p>All your completed study sessions.</p>
</div>

<div class="card">
  {% if sessions %}
  <table class="history-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Duration</th>
        <th>Reflection Preview</th>
      </tr>
    </thead>
    <tbody>
      {% for s in sessions %}
      <tr>
        <td class="text-dim text-mono">{{ loop.index }}</td>
        <td><span class="date-mono">{{ s.date }}</span></td>
        <td><span class="duration-pill">{{ s.duration_mins }}m</span></td>
        <td class="text-muted">
          {% if s.reflection %}
            {{ s.reflection[:80] }}{% if s.reflection|length > 80 %}â€¦{% endif %}
          {% else %}
            <span class="text-dim">â€”</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Pagination -->
  {% if total_pages > 1 %}
  <div class="pagination">
    {% if page > 1 %}
    <a href="{{ url_for('history', page=page-1) }}" class="btn btn-ghost btn-sm">â† Prev</a>
    {% else %}
    <button class="btn btn-ghost btn-sm" disabled>â† Prev</button>
    {% endif %}

    <span class="pagination-info">{{ page }} / {{ total_pages }}</span>

    {% if page < total_pages %}
    <a href="{{ url_for('history', page=page+1) }}" class="btn btn-ghost btn-sm">Next â†’</a>
    {% else %}
    <button class="btn btn-ghost btn-sm" disabled>Next â†’</button>
    {% endif %}
  </div>
  {% endif %}

  {% else %}
  <div class="empty-state">
    <div class="empty-icon">ğŸ—‚</div>
    <p>No completed sessions yet. Start your first one from the home page!</p>
  </div>
  {% endif %}
</div>

{% endblock %}
